高扩展性

首先要分层，分层是实现扩展的必要条件。

我们将系统分为如下几层：

1. 接入层，负责负载均衡

这里主要要求负载均衡策略的时间复杂度要尽量简单，追求$O(lgn)$的时间复杂度，最坏不能超过$O(n)$。对于更坏时间复杂度的均衡策略，性能上会扛不住。

2. 应用层

这里侧重点在于无状态，我们一定要确保我们的服务无状态。

3. 存储层

存储层做扩展会更麻烦一些。一般情况下，要求我们根据业务量提前估计好存储容量。根据计算出来的总的存储量，提前做足够的数据分片。

换言之，对于存储层，我们的一种思路是：早做扩展，以确保将来不做扩展；

另外一种思路是，添加必要的路由层（数据访问路由层）或者路由算法（数据表倍增法），来确保将来的扩展对上层不可见。