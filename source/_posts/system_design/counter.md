---
title: 常见系统设计题系列-微博计数系统
date: 2021-03-20 13:20:03
updated:
mathjax: true
categories:
- [系统设计]
tags: 
---

普通数据库

分库分表的数据库

数据库 + 缓存（可能会不一致）

全部都用redis

消息队列 + redis (buffer批量)

如何在有限的存储成本下，完成对于全量计数数据的存取

优化raw redis

redis + ssd

系统通知未读数：全量用户， 全局递增ID相减
系统通知的小红点：每一个人有一个时间戳  PK 全局时间戳

关注的未读数 = SumOf（每一个关注的人的最新值 - 上一次访问快照中的历史值）
